import{u as H,r as l,a as L,j as e,L as o}from"./app-PFMTeGKY.js";import{P as q}from"./page-shell-DUjiKtAj.js";import{B}from"./badge-CAkw4fAF.js";import{B as i}from"./index-oTGmYcGU.js";import{L as p,I as R}from"./label-CNOelgQz.js";import{S as f,a as v,b as S,c as y,d as n}from"./select-BbGTpr9c.js";import{T as D,a as F,b as N,c as d,d as $,e as t}from"./table-C7l9szij.js";import{d as G}from"./index-ClYWWAsG.js";import{e as c,i as J}from"./app-layout-D2IbHVWR.js";/* empty css            */import"./utils-DvRnx1Xn.js";import"./index-BLv60383.js";import"./index-LZPyxZBl.js";import"./app-logo-icon-rfpFvblb.js";const r="all";function ie(){const{employees:m,statuses:V,tags:M,stores:P,filters:a}=H().props,k=[{title:"Dashboard",href:G().url},{title:"Employees",href:c.index().url}],[h,b]=l.useState(a.search??""),[x,_]=l.useState(a.status_id?String(a.status_id):r),[u,T]=l.useState(a.tag_id?String(a.tag_id):r),[j,C]=l.useState(a.store_id?String(a.store_id):r),I=l.useMemo(()=>{const s={};return h.trim()&&(s.search=h.trim()),x!==r&&(s.status_id=x),u!==r&&(s.tag_id=u),j!==r&&(s.store_id=j),s},[h,x,u,j]);l.useEffect(()=>{const s=setTimeout(()=>{L.get(c.index().url,I,{preserveState:!0,preserveScroll:!0,replace:!0})},250);return()=>clearTimeout(s)},[I]);const z=()=>{b(""),_(r),T(r),C(r),L.get(c.index().url,{},{preserveState:!0,replace:!0})};return e.jsxs(q,{title:"Employees",breadcrumbs:k,children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Employees"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total: ",m.total]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{variant:"outline",asChild:!0,children:e.jsx(o,{href:J.create().url,children:"Import"})}),e.jsx(i,{asChild:!0,children:e.jsx(o,{href:c.create().url,children:"Create Employee"})})]})]}),e.jsxs("div",{className:"mt-4 rounded-lg border p-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Search"}),e.jsx(R,{value:h,onChange:s=>b(s.target.value),placeholder:"Name / preferred name…"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Status"}),e.jsxs(f,{value:x,onValueChange:_,children:[e.jsx(v,{children:e.jsx(S,{placeholder:"Any status"})}),e.jsxs(y,{children:[e.jsx(n,{value:r,children:"Any"}),V.map(s=>e.jsx(n,{value:String(s.id),children:s.value},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Tag"}),e.jsxs(f,{value:u,onValueChange:T,children:[e.jsx(v,{children:e.jsx(S,{placeholder:"Any tag"})}),e.jsxs(y,{children:[e.jsx(n,{value:r,children:"Any"}),M.map(s=>e.jsx(n,{value:String(s.id),children:s.tag_name},s.id))]})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-3",children:[e.jsx(p,{children:"Store"}),e.jsxs(f,{value:j,onValueChange:C,children:[e.jsx(v,{children:e.jsx(S,{placeholder:"Any store"})}),e.jsxs(y,{children:[e.jsx(n,{value:r,children:"Any"}),P.map(s=>e.jsxs(n,{value:String(s.id),children:[s.name," (#",s.manual_id,")"]},s.id))]})]})]})]}),e.jsx("div",{className:"mt-4 flex gap-2",children:e.jsx(i,{variant:"outline",type:"button",onClick:z,children:"Clear"})})]}),e.jsx("div",{className:"mt-4 rounded-lg border",children:e.jsxs(D,{children:[e.jsx(F,{children:e.jsxs(N,{children:[e.jsx(d,{children:"Name"}),e.jsx(d,{children:"Preferred"}),e.jsx(d,{children:"Status"}),e.jsx(d,{children:"Employment"}),e.jsx(d,{children:"Tags"}),e.jsx(d,{className:"w-[1%] text-right",children:"Actions"})]})}),e.jsxs($,{children:[m.data.map(s=>{const g=[s.first_name,s.middle_name,s.last_name].filter(Boolean).join(" "),E=s.employment?.store?.name??null,A=s.employment?.store?.manual_id??null;return e.jsxs(N,{children:[e.jsx(t,{className:"font-medium",children:g}),e.jsx(t,{children:s.preferred_name??"—"}),e.jsx(t,{children:s.status?.value?e.jsx(B,{variant:"secondary",children:s.status.value}):"—"}),e.jsx(t,{children:E?e.jsxs("span",{className:"text-sm",children:[E,A?` • #${A}`:""]}):"—"}),e.jsx(t,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:(s.tags??[]).length?(s.tags??[]).map(w=>e.jsx(B,{variant:"outline",children:w.tag_name},w.id)):"—"})}),e.jsx(t,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(i,{variant:"outline",size:"sm",asChild:!0,children:e.jsx(o,{href:c.show(s).url,children:"View"})}),e.jsx(i,{variant:"outline",size:"sm",asChild:!0,children:e.jsx(o,{href:c.edit(s).url,children:"Edit"})})]})})]},s.id)}),m.data.length===0&&e.jsx(N,{children:e.jsx(t,{colSpan:6,className:"py-10 text-center text-sm text-muted-foreground",children:"No employees found."})})]})]})}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:m.links.map((s,g)=>e.jsx(i,{variant:s.active?"default":"outline",size:"sm",asChild:!0,disabled:!s.url,children:e.jsx(o,{href:s.url??"#",preserveScroll:!0,preserveState:!0,children:e.jsx("span",{dangerouslySetInnerHTML:{__html:s.label}})})},g))})]})}export{ie as default};
